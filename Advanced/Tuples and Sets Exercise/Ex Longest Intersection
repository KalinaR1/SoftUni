n = int(input())
max_intersection = []
all = {}
intersection = []
max_length = 0

for line in range(n):
    data = input().split("-")
    first_inter = data[0].split(",")
    first_start = int(first_inter[0])
    first_end = int(first_inter[1])
    second_inter = data[-1].split(",")
    second_start = int(second_inter[0])
    second_end = int(second_inter[1])
    for inter in range(first_start, first_end + 1):
        if inter not in all:
            all[inter] = 0
        all[inter] += 1
    for inter in range(second_start, second_end + 1):
        if inter not in all:
            all[inter] = 0
        all[inter] += 1
    for num, count in all.items():
        if count > 1:
            intersection.append(num)
    if len(intersection) > max_length:
        max_length = len(intersection)
        max_intersection = intersection

    all = {}
    intersection = []

print(f"Longest intersection is {max_intersection} with length {max_length}")
